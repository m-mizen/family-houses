(this["webpackJsonpstore-finder"]=this["webpackJsonpstore-finder"]||[]).push([[0],{23:function(n,e,t){},29:function(n,e,t){"use strict";t.r(e);var r=t(1),o=t(0),c=t.n(o),i=t(11),a=t.n(i),u=(t(23),t(2)),l=t(3);function s(){var n=Object(u.a)(["\n    gap: 1em 0;\n    width: 100%;\n    display: block;\n    @media screen and (min-width: 900px) {\n        display:grid;\n        grid-template-rows: auto 1fr;\n        grid-template-columns: 3fr 5fr;\n        height: 100vh;\n    }\n"]);return s=function(){return n},n}var d=l.a.div(s()),f=t(4),b=t(17),j=t(16),p=Object(o.createContext)(null),v=function(n){var e=n.children,t=Object(o.useState)(!1),c=Object(f.a)(t,2),i=c[0],a=c[1];return Object(o.useEffect)((function(){if(!i){new j.a(Object(b.a)({apiKey:"AIzaSyCyocMMzml9i_X277lau2pfS5VhTlYpEoA",version:"beta"},{mapIds:["4705e028c2e7eae3"]})).load().then((function(){a(!0)}))}}),[i,a]),Object(r.jsx)(p.Provider,{value:{loaded:i},children:e})},O=t(9),h=t.n(O),x=t(15),g=Object(o.createContext)(void 0),m=function(n){var e=n.children,t=Object(o.useState)(),c=Object(f.a)(t,2),i=c[0],a=c[1];return Object(o.useEffect)((function(){function n(){return(n=Object(x.a)(h.a.mark((function n(){var e,t;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("./api_mock/locations.json");case 2:return e=n.sent,n.next=5,e.json();case 5:t=n.sent,a(t);case 7:case"end":return n.stop()}}),n)})))).apply(this,arguments)}try{!function(){n.apply(this,arguments)}()}catch(e){console.error(e)}}),[a]),Object(r.jsx)(g.Provider,{value:i,children:e})},y=Object(o.createContext)(void 0),C=function(n){var e=n.children,t=Object(o.useState)(void 0),c=Object(f.a)(t,2),i=c[0],a=c[1];return Object(r.jsx)(y.Provider,{value:{activeLocation:i,setActiveLocation:a},children:e})},k=function(n,e){var t=e.type,r=e.payload;switch(t){case"COUNTRY_SET":return r;case"RESET":return"gbr";default:return n}},E=function(n,e){var t=e.type,r=e.payload;switch(t){case"TAG_SET":return r;case"RESET":return"";default:return n}},w=function(n,e){var t=e.type,r=e.payload;switch(t){case"TERM_SET":return r;case"RESET":return"";default:return n}},T=Object(o.createContext)(void 0),S=function(n){var e=n.children,t=Object(o.useReducer)(w,""),c=Object(f.a)(t,2),i=c[0],a=c[1],u=Object(o.useReducer)(E,""),l=Object(f.a)(u,2),s=l[0],d=l[1],b=Object(o.useReducer)(k,"gbr"),j=Object(f.a)(b,2),p=j[0],v=j[1],O={term:i,tag:s,country:p},h=(Object(o.useContext)(y)||{}).setActiveLocation,x=Object(o.useCallback)((function(){var n={type:"RESET",payload:""};a(n),d(n),v(n),h&&h(void 0)}),[a,d,v,h]),g=Object(o.useCallback)((function(n){"RESET"===n.type?x():n.type.indexOf("TERM")>-1?a(n):n.type.indexOf("TAG")>-1?d(n):n.type.indexOf("COUNTRY")>-1&&v(n)}),[x]);return Object(r.jsx)(T.Provider,{value:{state:O,dispatch:g},children:e})},R=Object(o.createContext)(void 0),A=function(n){var e=n.children,t=(Object(o.useContext)(g)||{locations:[]}).locations,c=Object(o.useContext)(T),i=(Object(o.useContext)(y)||{}).setActiveLocation,a=Object(o.useState)(t),u=Object(f.a)(a,2),l=u[0],s=u[1],d=Object(o.useCallback)((function(n){if(i&&i(void 0),!c)return n;var e=c.state,t=e.tag,r=e.country,o=e.term;return n.filter((function(n){var e;return!(t&&!(null===(e=n.tags)||void 0===e?void 0:e.includes(t)))&&((!r||n.country===r)&&(!o||-1!==n.name.indexOf(o)||-1!==n.address.indexOf(o)||-1!==n.description.indexOf(o)))}))}),[c,i]);return Object(o.useEffect)((function(){s(d(t))}),[t,d]),Object(r.jsx)(R.Provider,{value:l,children:e})},L=function(n){var e=n.children;return Object(r.jsx)(v,{children:Object(r.jsx)(m,{children:Object(r.jsx)(S,{children:Object(r.jsx)(A,{children:Object(r.jsx)(C,{children:e})})})})})};function M(){var n=Object(u.a)(["\n    ","\n    border-bottom: 1px solid #d59563;\n\n    option {\n        color: inherit;\n        background: #444;\n    }\n"]);return M=function(){return n},n}function z(){var n=Object(u.a)(["\n    ","\n    border-bottom: 1px solid #d59563;\n"]);return z=function(){return n},n}function P(){var n=Object(u.a)(["\n    display: block;\n    font-size: 75%;\n    flex: 0 0 80px;\n    text-align: right;\n"]);return P=function(){return n},n}function _(){var n=Object(u.a)(["\n    display: flex;\n    align-items: baseline;\n    flex: 1 1 auto;\n    gap: .5em;\n    margin: .5em 0;\n    input, select {\n        flex: 1 1 auto;\n        width: 100%;\n    }\n"]);return _=function(){return n},n}function F(){var n=Object(u.a)(["\n    flex: 0 1 auto;\n    background: none;\n    color: #d59563;\n    font-size: 60%;\n    border: 2px solid #d59563;\n    border-radius: 6px;\n    padding: 0.25em .5em;\n    cursor: pointer;\n    &:hover, &:focus {\n        border-color: #d59563;\n        background-color: #d59563;\n        color: #333;\n    }\n\n    ","\n    \n    ","\n"]);return F=function(){return n},n}function I(){var n=Object(u.a)(["\n    display: flex;\n    flex-direction: row-reverse;\n    justify-content: flex-start;\n    gap: .5em;\n    margin: .75em 0 0;\n"]);return I=function(){return n},n}function N(){var n=Object(u.a)(["\n    display: block;\n    width: 80%;\n    margin: auto;\n"]);return N=function(){return n},n}var Z=l.a.form(N()),B=l.a.div(I()),Y=l.a.button(F(),(function(n){return"reset"===(null===n||void 0===n?void 0:n.type)&&"\n        color: #ff7043;\n        border-color: #ff7043;\n        &:hover, &:focus {\n            border-color: #ff7043;\n            background-color: #ff7043;\n            color: #333;\n        }\n    "}),(function(n){return"submit"===(null===n||void 0===n?void 0:n.type)&&"\n        border-color: #d59563;\n        background-color: #d59563;\n        color: #333;\n        &:hover, &:focus {\n            border-color: #fff;\n            background-color: #fff;\n        }\n    "})),D=l.a.label(_()),G=l.a.span(P()),U="\n    line-height: inherit;\n    color: #fff;\n    background: transparent;\n    display: block;\n    border: none;\n    cursor: pointer;\n",V=l.a.input(z(),U),q=l.a.select(M(),U),H=function(){var n=Object(o.useState)(""),e=Object(f.a)(n,2),t=e[0],c=e[1],i=Object(o.useState)(""),a=Object(f.a)(i,2),u=a[0],l=a[1],s=Object(o.useState)("gbr"),d=Object(f.a)(s,2),b=d[0],j=d[1],p=function(n,e){var t=Object(o.useState)(n),r=Object(f.a)(t,2),c=r[0],i=r[1];return Object(o.useEffect)((function(){var t=setTimeout((function(){i(n)}),e);return function(){clearTimeout(t)}}),[n,e]),c}(t,250),v=Object(o.useContext)(g)||{},O=v.tags,h=v.countries,x=Object(o.useContext)(T);return Object(o.useEffect)((function(){null===x||void 0===x||x.dispatch({type:"TERM_SET",payload:p})}),[p,x]),Object(o.useEffect)((function(){null===x||void 0===x||x.dispatch({type:"TAG_SET",payload:u})}),[u,x]),Object(o.useEffect)((function(){null===x||void 0===x||x.dispatch({type:"COUNTRY_SET",payload:b})}),[b,x]),Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(Z,{onSubmit:function(n){n.preventDefault()},children:[Object(r.jsxs)(D,{children:[Object(r.jsx)(G,{className:"label-text",children:"Search:"}),Object(r.jsx)(V,{type:"text",name:"search-term",placeholder:"Term to search",value:t,onChange:function(n){c(n.target.value)}})]}),Object(r.jsxs)(D,{children:[Object(r.jsx)(G,{className:"label-text",children:"Category:"}),Object(r.jsxs)(q,{name:"tag",onChange:function(n){l(n.target.value)},value:u,disabled:!O||O.length<1,children:[Object(r.jsx)("option",{children:"Please select:"}),null===O||void 0===O?void 0:O.map((function(n,e){return Object(r.jsx)("option",{value:n.id,children:n.name},e)}))]})]}),Object(r.jsxs)(D,{children:[Object(r.jsx)(G,{className:"label-text",children:"Country:"}),Object(r.jsx)(q,{name:"tag",onChange:function(n){j(n.target.value)},value:b,children:null===h||void 0===h?void 0:h.map((function(n,e){return Object(r.jsx)("option",{value:n.id,children:n.name},e)}))})]}),Object(r.jsx)(B,{children:Object(r.jsx)(Y,{type:"reset",onClick:function(n){c(""),l(""),j("gbr"),null===x||void 0===x||x.dispatch({type:"RESET",payload:""})},children:"Reset"})})]})})},J=t(5);function Q(){var n=Object(u.a)(["\n    font-size: 50%;\n    border-radius: 2px;\n    border: 1px solid currentColor;\n    padding: 0.2em 0.5em;\n    font-weight: 400;\n"]);return Q=function(){return n},n}function K(){var n=Object(u.a)(["\n    display: flex;\n    gap: 0.25em;\n"]);return K=function(){return n},n}function X(){var n=Object(u.a)(["\n    font-size: calc(12 / 18 * 100%);\n    text-transform: uppercase;\n    font-weight: 400;\n    margin: 0 0 0.25em;\n    text-decoration: underline;\n"]);return X=function(){return n},n}function W(){var n=Object(u.a)(["\n    display: block;\n    flex: 1 1 50%;    \n    color: #fff;\n"]);return W=function(){return n},n}function $(){var n=Object(u.a)(["\n    white-space: pre;\n"]);return $=function(){return n},n}function nn(){var n=Object(u.a)(["\n    cursor: default;\n    display: flex;\n    align-items: flex-start;\n    font-size: 75%;\n    gap: .5em;\n    margin-top: 1em;\n"]);return nn=function(){return n},n}function en(){var n=Object(u.a)(["\n    display: block;\n    width: 100%;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    overflow: hidden;\n    font-size: 100%;\n    margin: 0 ;\n"]);return en=function(){return n},n}function tn(){var n=Object(u.a)(["\n    display: block;\n    height: 1.5rem;\n    width: 1.5rem;\n    background: none;\n    border: none;\n    position: relative;\n    color: inherit;\n    cursor: pointer;\n    &:hover, &:focus{\n        color: #f2f2f2;\n    }\n    &::after{\n        content: '';\n        display: block;\n        width: 100%;\n        height: 2px;\n        position: absolute;\n        left: 50%;\n        top: 50%;\n        transform-origin: 0 0;\n    }\n    &::before{\n        content: '';\n        display: block;\n        width: 40%;\n        height: 40%;\n        position: absolute;\n        left: 50%;\n        top: 50%;\n        border-right: 2px solid currentColor;\n        border-bottom: 2px solid currentColor;\n        transform: translate(-50%, -50%) rotate(-45deg);\n    }\n\n    ","\n"]);return tn=function(){return n},n}function rn(){var n=Object(u.a)(["\n    display: flex;\n"]);return rn=function(){return n},n}function on(){var n=Object(u.a)(["\n    cursor: pointer;\n"]);return on=function(){return n},n}var cn=l.a.article(on()),an=l.a.div(rn()),un=l.a.button(tn(),(function(n){return n.active&&"\n        &::before{\n            background: #ff7043;\n            transform-origin: 0 0;\n            transform: translate(6px, 4px) rotate(45deg);\n            height: 2px;\n            width: 100%;\n            border: 0;\n            top: 0;\n            left: 0;\n        }\n        &::after{\n            background: #ff7043;\n            transform-origin: 100% 0;\n            transform: translate(-6px, 4px) rotate(-45deg);\n            height: 2px;\n            top: 0;\n            left: 0;\n        }\n        "})),ln=l.a.h1(en()),sn=l.a.div(nn()),dn=l.a.address($()),fn=l.a.div(W()),bn=l.a.h2(X()),jn=l.a.div(K()),pn=l.a.span(Q()),vn=function(n){var e=n.location,t=n.setActive,c=n.isActive,i=Object(o.useContext)(g),a=e.name,u=e.description,l=e.address,s=e.tags,d=s&&(null===i||void 0===i?void 0:i.tags)&&(null===s||void 0===s?void 0:s.map((function(n){var e;return null===(e=i.tags.find((function(e){return e.id===n})))||void 0===e?void 0:e.name})));return Object(r.jsxs)(cn,{onClick:t,children:[Object(r.jsxs)(an,{children:[Object(r.jsx)(ln,{children:a}),Object(r.jsx)(un,{active:c})]}),d&&d.length>0&&Object(r.jsx)(jn,{children:d.map((function(n,e){return Object(r.jsx)(pn,{children:n},e)}))}),c&&Object(r.jsxs)(sn,{onClick:function(n){return n.stopPropagation()},children:[Object(r.jsxs)(fn,{children:[Object(r.jsx)(bn,{children:"Description"}),u]}),l&&"redacted"!==l&&Object(r.jsxs)(fn,{children:[Object(r.jsx)(bn,{children:"Address"}),Object(r.jsx)(dn,{children:l})]})]})]})};function On(){var n=Object(u.a)(["\n    display: block;\n    margin: .5em 0;\n    padding: 0 .5em 0 .3em;\n    flex: 0 0 auto;\n    ","\n    border-left: .2em solid currentColor;\n"]);return On=function(){return n},n}function hn(){var n=Object(u.a)(["\n    list-style: none;\n    padding: 0;\n    display: flex;\n    flex-direction: column;\n"]);return hn=function(){return n},n}function xn(){var n=Object(u.a)(["\n    overflow-y: auto;\n    padding: 0;\n    margin: 0;\n    border-top: .2em solid #38414e;\n"]);return xn=function(){return n},n}var gn=l.a.div(xn()),mn=l.a.ul(hn()),yn=l.a.li(On(),(function(n){return n.bringToTop?"\n            order: 1;\n            border: 1px solid currentColor;\n            padding: .2em .5em 1em .3em;\n            ":"order: 2;"})),Cn=function(){var n=Object(o.useRef)(null),e=Object(o.useContext)(R)||[],t=Object(o.useContext)(y)||{},c=t.activeLocation,i=t.setActiveLocation,a=Object(J.useMediaQuery)({query:"(min-width:900px)"}),u=Object(o.useCallback)((function(){var e;a?null===n||void 0===n||null===(e=n.current)||void 0===e||e.scrollTo({top:0,behavior:"smooth"}):window.scrollTo({top:0,behavior:"smooth"})}),[a]);return Object(o.useEffect)((function(){c&&n.current&&u()}),[n,c,u]),Object(r.jsx)(gn,{ref:n,children:Object(r.jsx)(mn,{children:null===e||void 0===e?void 0:e.map((function(n){var e=n.id===c;return Object(r.jsx)(yn,{bringToTop:e,children:Object(r.jsx)(vn,{isActive:e,setActive:function(){var e;(e=n.id)&&i&&i(e===c?void 0:e)},location:n})},n.id)}))})})};function kn(){var n=Object(u.a)(["\n    display: block;\n    height: 50vh;\n    @media screen and (min-width: 900px) {\n        height: 100%;\n        grid-row: 1 / 3;\n        grid-column: 2;\n    }\n"]);return kn=function(){return n},n}var En=l.a.div(kn()),wn=function(){var n=Object(o.useContext)(p),e=Object(o.useContext)(R),t=Object(o.useContext)(y)||{},c=t.activeLocation,i=t.setActiveLocation,a=Object(o.useState)(void 0),u=Object(f.a)(a,2),l=u[0],s=u[1],d=Object(o.useState)(void 0),b=Object(f.a)(d,2),j=b[0],v=b[1],O=Object(o.useRef)(null);return Object(o.useEffect)((function(){O.current&&(null===n||void 0===n?void 0:n.loaded)&&s(new google.maps.Map(O.current,{mapId:"4705e028c2e7eae3",center:{lat:-33,lng:151},zoom:8,zoomControl:!1}))}),[n,O,s]),Object(o.useEffect)((function(){if(l&&(!j||!e||j.length!==e.length)){null===j||void 0===j||j.forEach((function(n){n.setMap(null)}));var n=null===e||void 0===e?void 0:e.map((function(n){var e=n.lat,t=n.lng;return new google.maps.Marker({position:{lat:e,lng:t},map:l})}));v(n)}}),[l,e,v,j]),Object(o.useEffect)((function(){if(j&&l&&i&&e){var n=new google.maps.LatLngBounds;return(null===j||void 0===j?void 0:j.length)>0?(j.forEach((function(e){var t=e.getPosition();t&&n.extend(t)})),l.fitBounds(n),l.setZoom(Math.min(l.getZoom()-1,15))):(l.setZoom(8),l.panTo({lat:51.51403184993422,lng:-.1270110922311092})),j.forEach((function(n,t){n.addListener("click",(function(n){i&&e[t]&&i(e[t].id)}))})),function(){null===j||void 0===j||j.forEach((function(n){google.maps.event.clearInstanceListeners(n)}))}}}),[l,j,e,i]),Object(o.useEffect)((function(){if(e&&l&&"undefined"!==typeof c&&j){var n=e.findIndex((function(n){return n.id===c}));if("undefined"!==typeof n){var t=j[n];if(t){var r=t.getPosition();r&&(l.panTo(r),l.getZoom()<12&&l.setZoom(12))}}}}),[l,c,j,e]),Object(r.jsx)(En,{ref:O})};function Tn(){var n=Object(u.a)(["\n    position: relative;\n    ","\n"]);return Tn=function(){return n},n}function Sn(){var n=Object(u.a)(["\n    position: absolute;\n    left: 0;\n    right: 0;\n    bottom: 36px;\n    padding: .2em 0 0.8em;\n"]);return Sn=function(){return n},n}function Rn(){var n=Object(u.a)(["\n    display: block;\n    background: none;\n    color: #d59563;\n    border: 2px solid #d59563;\n    padding: 0.25em .5em;\n    cursor: pointer;\n    background: #333;\n    font-size: 80%;\n    width: 100%;\n    position: relative;\n    transition: margin .2s;\n    border-radius: 0;\n    &::after {\n        margin-left: .4em;\n        content: '';\n        display: inline-block;\n        height: .4em;\n        width: .4em;\n        border-right: 2px solid currentColor;\n        border-bottom: 2px solid currentColor;\n        transform: rotate(45deg) translate(-2px, -2px);\n    }\n"]);return Rn=function(){return n},n}var An=l.a.button(Rn()),Ln=l.a.div(Sn()),Mn=l.a.div(Tn(),(function(n){return n.isVisible&&"button::after{ transform: rotate(-135deg) translate(-2px, -2px); }"})),zn=function(n){var e=n.children,t=Object(J.useMediaQuery)({query:"(min-width:900px)"}),c=Object(o.useState)(!1),i=Object(f.a)(c,2),a=i[0],u=i[1],l=Object(o.useState)(0),s=Object(f.a)(l,2),d=s[0],b=s[1],j=Object(o.useRef)(null);if(t)return Object(r.jsx)(r.Fragment,{children:e});return Object(r.jsx)("div",{children:Object(r.jsxs)(Mn,{isVisible:a,children:[Object(r.jsx)(Ln,{ref:j,children:e}),Object(r.jsx)(An,{style:{marginTop:d},onClick:function(){if(a)u(!1),b(0);else{var n;if(u(!0),!(null===j||void 0===j||null===(n=j.current)||void 0===n?void 0:n.offsetHeight))return;b(j.current.offsetHeight)}},children:"Filter"})]})})},Pn=function(){return Object(r.jsx)("div",{id:"store-finder-app",children:Object(r.jsx)(L,{children:Object(r.jsxs)(d,{children:[Object(r.jsx)(zn,{children:Object(r.jsx)(H,{})}),Object(r.jsx)(wn,{}),Object(r.jsx)(Cn,{})]})})})},_n=function(n){n&&n instanceof Function&&t.e(3).then(t.bind(null,30)).then((function(e){var t=e.getCLS,r=e.getFID,o=e.getFCP,c=e.getLCP,i=e.getTTFB;t(n),r(n),o(n),c(n),i(n)}))};a.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(Pn,{})}),document.getElementById("root")),_n()}},[[29,1,2]]]);
//# sourceMappingURL=main.f9dae413.chunk.js.map